RewriteEngine on

AddDefaultCharset UTF-8

# Not using this so turn it off
FileETag none



<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule>

# ----------------------------------------------------------------------
# Gzip compression
# ----------------------------------------------------------------------

<IfModule mod_deflate.c>

  # Force deflate for mangled headers developer.yahoo.com/blogs/ydn/posts/2010/12/pushing-beyond-gzipping/
  <IfModule mod_setenvif.c>
    <IfModule mod_headers.c>
      #SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|X{15}|~{15}|-{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
      #RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding
    </IfModule>
  </IfModule>

  # Compress all output labeled with one of the following MIME-types
  <IfModule mod_filter.c>
    # compress text, HTML, JavaScript, CSS, and XML
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
    AddOutputFilterByType DEFLATE application/atom+xml
    AddOutputFilterByType DEFLATE application/json
    AddOutputFilterByType DEFLATE application/x-font-ttf
    AddOutputFilterByType DEFLATE image/x-icon
    AddOutputFilterByType DEFLATE image/png
    AddOutputFilterByType DEFLATE image/jpeg
    AddOutputFilterByType DEFLATE image/gif
    AddOutputFilterByType DEFLATE text/x-component

    # remove browser bugs
    BrowserMatch ^Mozilla/4 gzip-only-text/html
    BrowserMatch ^Mozilla/4\.0[678] no-gzip
    BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
    Header append Vary User-Agent

  </IfModule>

</IfModule>

AddType "text/css;charset=UTF-8" .cssgz
AddEncoding gzip .cssgz

AddType "text/javascript;charset=UTF-8" .jsgz
AddEncoding gzip .jsgz

<ifModule mod_gzip.c>
    mod_gzip_on Yes
    mod_gzip_dechunk Yes
    mod_gzip_item_include file .(html?|txt|css|js|php|pl)$
    mod_gzip_item_include handler ^cgi-script$
    mod_gzip_item_include mime ^text/.*
    mod_gzip_item_include mime ^application/x-javascript.*
    mod_gzip_item_exclude mime ^image/.*
    mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule>

<ifModule mod_expires.c>
    ExpiresActive On
    ExpiresByType text/html "access plus 2 days"
    ExpiresByType image/x-icon "access plus 1 year"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType text/css "access 1 month"
    ExpiresByType application/javascript "access plus 1 year"
    ExpiresByType application/x-javascript "access plus 1 year"
    ExpiresDefault "access plus 1 month"
</ifModule>

<ifModule mod_headers.c>
   <filesMatch "\\.(ico|pdf|flv|jpg|jpeg|png|gif|swf)$">
     Header set Cache-Control "max-age=31536000, public"
   </filesMatch>
   <filesMatch "\\.(css)$">
     Header set Cache-Control "max-age=31536000, public"
   </filesMatch>
   <filesMatch "\\.(js)$">
     Header set Cache-Control "max-age=31536000, private"
   </filesMatch>
   <filesMatch "\\.(xml|txt)$">
     Header set Cache-Control "max-age=216000, public, must-revalidate"
   </filesMatch>
   <filesMatch "\\.(html|htm|php)$">
     Header set Cache-Control "max-age=60, private, must-revalidate"
   </filesMatch>
 </ifModule>

# Move from old site
Redirect gone /links.html
Redirect gone /definitions.html
Redirect gone /iain/documents.php
Redirect gone /iain/social-media.php
redirect 301 /iain/site-map.php                 http://whiteinternet.com/sitemap
redirect 301 /site-map.php                      http://whiteinternet.com/sitemap
redirect 301 /coding-standards.html				http://whiteinternet.com/iain-white/php-developer
redirect 301 /definitions.html					http://www.whiteinternet.com/404
redirect 301 /development-books.html			http://www.whiteinternet.com/books
redirect 301 /ecommerce.html					http://whiteinternet.com/iain-white/php-developer
redirect 301 /iain-white-done.html				http://whiteinternet.com/iain-white
redirect 301 /javascript-history.html			http://whiteinternet.com/iain-white/javascript-guru
redirect 301 /links.html						http://www.whiteinternet.com/404
redirect 301 /php-cms.html						http://whiteinternet.com/iain-white/php-developer
redirect 301 /php-coding-standards.html			http://whiteinternet.com/iain-white/php-developer
redirect 301 /php-frameworks.html				http://whiteinternet.com/iain-white/php-developer
redirect 301 /phpdocumentor.html				http://whiteinternet.com/iain-white/php-developer
redirect 301 /pragmatic-programmer.html			http://www.whiteinternet.com/iain-white/pragmatic-programmer
redirect 301 /search-engine-optimisation.html	http://www.whiteinternet.com/iain-white/web-developer
redirect 301 /top-three-development-books.html	http://www.whiteinternet.com/books
redirect 301 /web-applications.html				http://www.whiteinternet.com/iain-white/web-developer
redirect 301 /web-design.html					http://www.whiteinternet.com/iain-white/web-developer
redirect 301 /web-development-duck.html			http://www.whiteinternet.com/iain-white/development-duck
redirect 301 /web-development.html				http://www.whiteinternet.com/iain-white/web-developer
redirect 301 /iain/case-studies.php			    http://www.whiteinternet.com/iain-white/work-examples
redirect 301 /iain/code-examples.php		    http://www.whiteinternet.com/iain-white/work-examples
redirect 301 /iain/index.php				    http://www.whiteinternet.com/iain-white/iain-white
redirect 301 /iain/recommendations.php		    http://www.whiteinternet.com/iain-white/recommendations
redirect 301 /iain/reviews.php				    http://www.whiteinternet.com/iain-white/press-and-reviews
redirect 301 /iain/work-examples.php		    http://www.whiteinternet.com/iain-white/work-examples
redirect 301 /iain/work-information.php		    http://www.whiteinternet.com/iain-white/work-examples
redirect 301 /iain/resume.html				    http://www.whiteinternet.com/iain-white/resume
redirect 301 /iain/cv.html					    http://www.whiteinternet.com/iain-white/resume

# Keep
redirect 301 /iain-white/cv					    http://www.whiteinternet.com/iain-white/resume
redirect 301 /iain-white/curriculum-vitae       http://www.whiteinternet.com/iain-white/resume
